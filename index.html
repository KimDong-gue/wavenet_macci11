<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      요기요_멕시카나치킨 할인 마케팅 통합 성과 리포트 (Interactive)
    </title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap");

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans KR", sans-serif;
        line-height: 1.8;
        color: #2c3e50;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        border-radius: 20px;
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        padding: 60px 40px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: pulse 15s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .header h1 {
        font-size: 2.5em;
        font-weight: 700;
        margin-bottom: 15px;
        position: relative;
        z-index: 1;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .header .header-info {
        font-size: 1.1em;
        opacity: 0.95;
        position: relative;
        z-index: 1;
        margin-top: 10px;
      }

      .header .header-info p {
        margin: 5px 0;
      }

      .content {
        padding: 40px;
      }

      .executive-summary {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 40px;
        border-radius: 12px;
        margin-bottom: 50px;
        box-shadow: 0 6px 20px rgba(245, 87, 108, 0.3);
      }

      .executive-summary h2 {
        font-size: 1.8em;
        margin-bottom: 25px;
        font-weight: 600;
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 25px;
      }

      .summary-card {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        padding: 25px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .summary-card h3 {
        font-size: 1.1em;
        margin-bottom: 12px;
        font-weight: 600;
      }

      .summary-card p {
        font-size: 0.95em;
        line-height: 1.7;
      }

      .toc {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 40px;
        border-left: 5px solid #e74c3c;
      }

      .toc h2 {
        color: #e74c3c;
        margin-bottom: 20px;
        font-size: 1.8em;
        padding-bottom: 0;
        border-bottom: none;
        margin-top: 0;
      }

      .toc ol {
        list-style: decimal;
        margin-left: 25px;
      }

      .toc ol li {
        padding: 10px 0;
        border-bottom: 1px solid #e9ecef;
      }

      .toc ol li:last-child {
        border-bottom: none;
      }

      .toc ol a {
        color: #495057;
        text-decoration: none;
        transition: all 0.3s;
        padding: 5px 10px;
        border-radius: 8px;
        display: inline-block;
      }

      .toc ol a:hover {
        background: #e74c3c;
        color: white;
        transform: translateX(10px);
      }

      .section {
        margin-bottom: 60px;
        scroll-margin-top: 20px;
      }

      .section h2 {
        color: #2c3e50;
        font-size: 1.8em;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 3px solid #667eea;
        font-weight: 600;
      }

      .section h3 {
        color: #764ba2;
        font-size: 1.3em;
        margin: 30px 0 20px;
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin: 30px 0;
      }

      .metric-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        transition: transform 0.3s;
      }

      .metric-card:hover {
        transform: translateY(-5px);
      }

      .metric-label {
        font-size: 0.9em;
        opacity: 0.9;
        margin-bottom: 10px;
      }

      .metric-value {
        font-size: 2.2em;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .metric-subtitle {
        font-size: 0.85em;
        opacity: 0.8;
      }

      .insight-box {
        background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
        border-left: 5px solid #00acc1;
        padding: 30px;
        margin: 30px 0;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 172, 193, 0.15);
      }

      .insight-box h4 {
        color: #00838f;
        font-size: 1.1em;
        margin-bottom: 12px;
        font-weight: 600;
      }

      .insight-box p {
        color: #006064;
        margin-bottom: 12px;
        line-height: 1.8;
      }

      .strategy-box {
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        border-left: 5px solid #ff6f00;
        padding: 30px;
        margin: 30px 0;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(255, 111, 0, 0.15);
      }

      .strategy-box h3 {
        color: #e65100;
        font-size: 1.3em;
        margin-bottom: 20px;
        font-weight: 600;
      }

      .strategy-box ul {
        list-style: none;
        padding-left: 0;
      }

      .strategy-box li {
        padding-left: 30px;
        position: relative;
        margin-bottom: 15px;
        color: #bf360c;
        line-height: 1.8;
      }

      .strategy-box li::before {
        content: "▸";
        position: absolute;
        left: 10px;
        color: #ff6f00;
        font-weight: 700;
      }

      .footer {
        text-align: center;
        margin-top: 50px;
        padding-top: 30px;
        border-top: 2px solid #e9ecef;
        color: #7f8c8d;
      }

      .footer p {
        margin: 5px 0;
      }

      .chart-container {
        margin: 30px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        min-height: 400px;
      }

      .chart-container > div {
        min-height: 400px;
        width: 100%;
        display: block;
      }

      .plotly-graph-div,
      .plotly .svg-container,
      .plotly .main-svg {
        width: 100% !important;
        min-height: 400px !important;
      }

      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin: 30px 0;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      }

      thead {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      th {
        padding: 18px 15px;
        text-align: center;
        font-weight: 600;
        font-size: 0.95em;
      }

      td {
        padding: 15px;
        text-align: center;
        border-bottom: 1px solid #e0e0e0;
        font-size: 0.9em;
      }

      tbody tr {
        background: white;
        transition: background 0.3s;
      }

      tbody tr:hover {
        background: #f5f5f5;
      }

      .highlight {
        background: #fff3cd;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 600;
        color: #856404;
      }

      .highlight-success {
        background: #d4edda;
        color: #155724;
      }

      .highlight-danger {
        background: #f8d7da;
        color: #721c24;
      }

      @media (max-width: 768px) {
        .header {
          padding: 40px 30px;
        }

        .header h1 {
          font-size: 1.8em;
        }

        .content {
          padding: 20px;
        }

        .metrics-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>🍗 요기요_멕시카나치킨 할인 캠페인<br />마케팅 통합 성과 리포트</h1>
        <div class="header-info">
          <p><strong>분석 기간:</strong> 2025년 캠페인 기준</p>
          <p>
            <strong>총 발송:</strong> 41,998건 | <strong>총 클릭:</strong> 655건
            | <strong>평균 CTR:</strong> 1.56%
          </p>
        </div>
      </div>

      <div class="content">
        <!-- Table of Contents -->
        <div class="toc">
          <h2>📋 목차</h2>
          <ol>
            <li><a href="#summary">Executive Summary</a></li>
            <li><a href="#s1">전체 캠페인 성과 요약</a></li>
            <li><a href="#s2">주요 세그먼트 성과 비교</a></li>
            <li><a href="#s3">앱 카테고리별 성과 분석</a></li>
            <li><a href="#s4">상세 앱/플랫폼 CTR 분석</a></li>
            <li><a href="#s5">성연령별 성과 분석</a></li>
            <li><a href="#s6">관심사별 행동 패턴</a></li>
            <li><a href="#s7">음식/배달 앱 심층 분석</a></li>
            <li><a href="#s8">고객 세그먼트 세부분석</a></li>
            <li><a href="#s9">지역별 사용 행태 분석</a></li>
            <li><a href="#strategy">전략 제언</a></li>
          </ol>
        </div>

        <!-- Executive Summary -->
        <div class="section" id="summary">
          <h2>📊 요약 (Executive Summary)</h2>
          <div class="executive-summary">
            <h2>📝 Executive Summary</h2>
            <div class="summary-grid">
              <div class="summary-card">
                <h3>💡 What (핵심 성과)</h3>
                <p>
                  캠페인 총 발송수 <span class="highlight">41,998</span>건, 총
                  클릭 <span class="highlight">655</span>건 — 평균 CTR
                  <span class="highlight">1.56%</span>를 기록했습니다.
                </p>
              </div>
              <div class="summary-card">
                <h3>🔍 Why (주요 원인)</h3>
                <p>
                  30대 후반 및 주택 거주자 세그먼트가 높은 CTR을 보였으며, Life
                  카테고리 앱 사용자가 우수한 성과를 달성했습니다.
                </p>
              </div>
              <div class="summary-card">
                <h3>🚀 So What (전략 방향)</h3>
                <p>
                  고효율 타겟(30대 후반 & 주택 거주자)에 예산 집중 및 차별 쿠폰
                  발행으로 ROI 극대화를 권장합니다.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="section" id="s1">
          <h2>1️⃣ 전체 캠페인 성과 요약</h2>

          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label">총 발송 수</div>
              <div class="metric-value">41,998</div>
              <div class="metric-subtitle">건</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">총 클릭 수</div>
              <div class="metric-value">655</div>
              <div class="metric-subtitle">건</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">평균 CTR</div>
              <div class="metric-value">1.56%</div>
              <div class="metric-subtitle">성과 기준선</div>
            </div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>
              전체 캠페인에서 41,998건 발송 대비 655건 클릭이 발생하여 1.56%의
              평균 CTR을 기록했습니다.
            </p>

            <h4>🔍 Why</h4>
            <p>
              캠페인 평균 CTR은 전반적인 마케팅 효율성을 나타내며, 이 수치는
              후속 분석을 위한 성과 기준선(Benchmark)이 됩니다.
            </p>

            <h4>🚀 So What</h4>
            <p>
              향후 캠페인에서는 1.56%를 상회하는 CTR을 목표로, 성과가 높은
              타겟팅 및 콘텐츠 전략을 발굴하는 데 집중해야 합니다.
            </p>
          </div>
        </div>

        <div class="section" id="s2">
          <h2>2️⃣ 주요 세그먼트 성과 비교</h2>

          <div class="chart-container">
            <div
              id="chart-s2"
              class="plotly-data"
              data-graph='{"data":[{"x":["남성 30-34","남성 45-49","여성 30-34","여성 25-29","여성 20-24","남성 20-24"],"y":[2.0739404869251574,1.8322762508809023,1.8216516308119362,0.8347245409015025,0.7696419027258151,0.6183635227982511],"type":"bar","marker":{"color":"#F77F00"},"text":["2.07%","1.83%","1.82%","0.83%","0.77%","0.62%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>주요 성연령별 CTR 비교</b>","font":{"size":16}},"xaxis":{"tickangle":-40,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>남성 30-34: 2.07% (최고), 여성 25-29: 0.83% (저조)</p>

            <h4>🔍 Why</h4>
            <p>구매력·식사 패턴 차이로 30대가 할인 반응가 큼</p>

            <h4>🚀 So What</h4>
            <p>
              고성과군에는 강력한 즉시 혜택, 저성과군에는 혜택 형식·타이밍 A/B
              테스트 권장
            </p>
          </div>
        </div>

        <div class="section" id="s3">
          <h2>3️⃣ 앱 카테고리별 성과 분석</h2>

          <div class="chart-container">
            <div
              id="chart-s3"
              class="plotly-data"
              data-graph='{"data":[{"x":["Life","Information","Communication","Entertainment"],"y":[68,79231,79428,39774],"name":"발송 건수","type":"bar","marker":{"color":"#2E86AB"},"text":["68건","79,231건","79,428건","39,774건"],"textposition":"outside"},{"x":["Life","Information","Communication","Entertainment"],"y":[4.411764705882353,1.5865002334944656,1.583824344060029,1.5789209031025293],"name":"CTR","type":"scatter","mode":"lines+markers","marker":{"color":"#F77F00","size":8},"yaxis":"y2","text":["4.41%","1.59%","1.58%","1.58%"],"textposition":"top"}],"layout":{"title":{"text":"<b>앱 카테고리별: 발송 vs CTR</b>","font":{"size":16}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"발송 건수","titlefont":{"color":"#2E86AB"}},"yaxis2":{"title":"CTR (%)","titlefont":{"color":"#F77F00"},"overlaying":"y","side":"right","range":[0,5]},"legend":{"orientation":"h","y":-0.25},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>Life 카테고리 CTR 4.41%로 최상위.</p>

            <h4>🔍 Why</h4>
            <p>라이프스타일 관련 사용자는 프로모션과 높은 연관성.</p>

            <h4>🚀 So What</h4>
            <p>
              Life 카테고리 집중 타겟팅, 다른 카테고리에는 상황 기반 메시지
              권장.
            </p>
          </div>
        </div>

        <div class="section" id="s4">
          <h2>4️⃣ 상세 앱/플랫폼 CTR 분석</h2>

          <div class="chart-container">
            <div
              id="chart-s4"
              class="plotly-data"
              data-graph='{"data":[{"x":["마켓컬리(MarketKurly)","쿠팡이츠(CoupangEats)","팔도감(Paldogam)","롯데잇츠(Lotteeatz)","배민상회(BaeminMart)"],"y":[10.0,1.9679527069072806,1.8354860639021073,1.7801178387865113,1.6913847692051325],"type":"bar","marker":{"color":"#F77F00"},"text":["10.00%","1.97%","1.84%","1.78%","1.69%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>Food/Delivery 앱 CTR Top 5</b>","font":{"size":16}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,12]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <table>
            <thead>
              <tr>
                <th>앱/플랫폼명</th>
                <th>발송 (Sent)</th>
                <th>클릭 (Click)</th>
                <th>CTR</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>마켓컬리(MarketKurly)</td>
                <td>10</td>
                <td>1</td>
                <td><span class="highlight">10.00%</span></td>
              </tr>
              <tr>
                <td>쿠팡이츠</td>
                <td>12,856</td>
                <td>253</td>
                <td><span class="highlight">1.97%</span></td>
              </tr>
              <tr>
                <td>팔도감(Paldogam)</td>
                <td>11,768</td>
                <td>216</td>
                <td><span class="highlight">1.84%</span></td>
              </tr>
              <tr>
                <td>롯데잇츠</td>
                <td>23,931</td>
                <td>426</td>
                <td><span class="highlight">1.78%</span></td>
              </tr>
              <tr>
                <td>배민상회(BaeminMart)</td>
                <td>12,002</td>
                <td>203</td>
                <td><span class="highlight">1.69%</span></td>
              </tr>
            </tbody>
          </table>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>마켓컬리 사용자 CTR 10.00% (최고)</p>

            <h4>🔍 Why</h4>
            <p>가성비/비교 소비 성향으로 프로모션에 민감</p>

            <h4>🚀 So What</h4>
            <p>'쿠폰 비교', '최대 할인' 같은 경쟁우위 문구를 강조</p>
          </div>
        </div>

        <div class="section" id="s5">
          <h2>5️⃣ 성연령별 성과 분석</h2>

          <div class="chart-container">
            <div
              id="chart-s5"
              class="plotly-data"
              data-graph='{"data":[{"x":["20-24","25-29","30-34","40-44","45-49"],"y":[0.6183635227982511,1.386365165892725,2.0739404869251574,1.3019529293940912,1.8322762508809023],"name":"남성","type":"bar","marker":{"color":"#2E86AB"}},{"x":["20-24","25-29","30-34","40-44","45-49"],"y":[0.7696419027258151,0.8347245409015025,1.8216516308119362,1.4498095589138715,1.7970528333533007],"name":"여성","type":"bar","marker":{"color":"#06A77D"}}],"layout":{"title":{"text":"<b>성연령별 CTR 분포</b>","font":{"size":16}},"barmode":"group","xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>30대 후반(35-39세) 그룹 최고 CTR(≈2.07%)</p>

            <h4>🔍 Why</h4>
            <p>구매력·가구 소비자 위치로 즉응형 반응</p>

            <h4>🚀 So What</h4>
            <p>30대 후반을 집중 타겟으로 설정하여 높은 할인·세트 제안 권장</p>
          </div>
        </div>

        <div class="section" id="s6">
          <h2>6️⃣ 관심사별 행동 패턴</h2>

          <div class="chart-container">
            <div
              id="chart-s6"
              class="plotly-data"
              data-graph='{"data":[{"x":["Life","Information","Communication","Entertainment"],"y":[4.411764705882353,1.5865002334944656,1.583824344060029,1.5789209031025293],"type":"bar","marker":{"color":"#F77F00"},"text":["4.41%","1.59%","1.58%","1.58%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>관심사(App Cat1)별 CTR</b>","font":{"size":16}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>Life 카테고리 사용자 CTR 최고(4.41%)</p>

            <h4>🔍 Why</h4>
            <p>라이프스타일 관련 혜택에 직관적 반응</p>

            <h4>🚀 So What</h4>
            <p>
              Life 그룹에는 혜택 중심 메시지 유지, Entertainment에는 상황 기반
              메시지 적용
            </p>
          </div>
        </div>

        <div class="section" id="s7">
          <h2>7️⃣ 음식/배달 앱 심층 분석</h2>
          <div class="insight-box">
            <h4>💡 What</h4>
            <p>마켓컬리(MarketKurly) 사용자 CTR 10%로 최상위</p>

            <h4>🔍 Why</h4>
            <p>프로모션 민감도 및 배달서비스 이용 빈도 영향</p>

            <h4>🚀 So What</h4>
            <p>즉시 구입 유도 메시지(푸시)와 연계된 제안 권장</p>
          </div>

          <div class="chart-container">
            <div
              id="chart-s7"
              class="plotly-data"
              data-graph='{"data":[{"x":["마켓컬리(MarketKurly)","쿠팡이츠(CoupangEats)","팔도감(Paldogam)","롯데잇츠(Lotteeatz)","배민상회(BaeminMart)","배달의민족(Baemin)","비비노(Vivino) Web"],"y":[10.0,1.9679527069072806,1.8354860639021073,1.7801178387865113,1.6913847692051325,1.579961464354528,1.5384615384615385],"type":"bar","marker":{"color":"#F77F00"},"text":["10.00%","1.97%","1.84%","1.78%","1.69%","1.58%","1.54%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>음식/배달 앱별 CTR 심층분석</b>","font":{"size":16}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,12]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>
        </div>

        <div class="section" id="s8">
          <h2>8️⃣ 고객 세그먼트 세부분석</h2>
          <div class="insight-box">
            <h4>💡 What</h4>
            <p>주택/빌라/원룸 거주자 및 유치원생 부모가 높은 반응</p>

            <h4>🔍 Why</h4>
            <p>배달 의존도·가족 수요 차이</p>

            <h4>🚀 So What</h4>
            <p>배달 편의성 강조 메시지·가족 세트 제안 권장</p>
          </div>

          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
              gap: 20px;
              margin: 30px 0;
            "
          >
            <div class="chart-container">
              <div
                id="chart-s8-residence"
                class="plotly-data"
                data-graph='{"data":[{"x":["주택/빌라/원룸","기타","아파트","오피스텔","알수없음"],"y":[1.7917788968263262,1.6403785488958993,1.5276412311880814,1.4577259475218658,1.452604134334844],"type":"bar","marker":{"color":"#F77F00"},"text":["1.79%","1.64%","1.53%","1.46%","1.45%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>거주 형태별 CTR</b>","font":{"size":14}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
              ></div>
            </div>

            <div class="chart-container">
              <div
                id="chart-s8-stage"
                class="plotly-data"
                data-graph='{"data":[{"x":["유치원생 부모","고등학생 부모","유아 부모","고등학생"],"y":[1.7650639074863057,1.5274949083503055,1.439736733854381,0.4660452729693742],"type":"bar","marker":{"color":"#F77F00"},"text":["1.77%","1.53%","1.44%","0.47%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>라이프스테이지별 CTR</b>","font":{"size":14}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
              ></div>
            </div>
          </div>
        </div>

        <div class="section" id="s9">
          <h2>9️⃣ 지역별 사용 행태 분석</h2>

          <div class="chart-container">
            <div
              id="chart-s9"
              class="plotly-data"
              data-graph='{"data":[{"x":["전남","경기","강원","서울","경남"],"y":[1.8275862068965518,1.630083925112976,1.5245354930919486,1.452689438555163,1.215443279313632],"type":"bar","marker":{"color":"#F77F00"},"text":["1.83%","1.63%","1.52%","1.45%","1.22%"],"textposition":"outside","opacity":0.9}],"layout":{"title":{"text":"<b>시도별 CTR 분포</b>","font":{"size":16}},"xaxis":{"tickangle":-35,"automargin":true},"yaxis":{"title":"CTR (%)","range":[0,5]},"plot_bgcolor":"#F8F9FA","paper_bgcolor":"white","autosize":true,"margin":{"t":50,"b":120}}}'
            ></div>
          </div>

          <div class="insight-box">
            <h4>💡 What</h4>
            <p>전남 CTR 1.83%로 최고</p>

            <h4>🔍 Why</h4>
            <p>경쟁 프로모션 적음·혜택 독점 효과 가능</p>

            <h4>🚀 So What</h4>
            <p>마이너 지역(전남 등)에 예산 확대 검토</p>
          </div>
        </div>

        <div class="section" id="strategy">
          <h2>🎯 핵심 전략 제언</h2>
          <div class="strategy-box">
            <h3>1. 고효율 타겟(30대 후반 & 주택 거주자) 예산 집중</h3>
            <ul>
              <li>
                분석 결과 상위 세그먼트에 예산 집중(권장 최소 50%) 및 차별 쿠폰
                발행(배달비 무료, 추가 할인)로 ROI 극대화.
              </li>
            </ul>
          </div>

          <div class="strategy-box">
            <h3>2. 경쟁 앱 사용자 대상 메시징 개인화(A/B 테스트)</h3>
            <ul>
              <li>
                쿠팡이츠/롯데잇츠 등 경쟁 앱 사용자는 프로모션 민감도가 높음 —
                '타 플랫폼 대비 최대 할인' 등 문구 테스트 권장.
              </li>
            </ul>
          </div>

          <div class="strategy-box">
            <h3>3. 저성과군에 대한 포지셔닝 전환</h3>
            <ul>
              <li>
                20대 초반 및 일부 메이저 지역은 '소셜 공유 이벤트', '시간대 한정
                게릴라 할인' 등 다른 접근법으로 재접근 필요.
              </li>
            </ul>
          </div>
        </div>

        <!-- Footer -->
        <div class="footer">
          <p><strong>작성:</strong> WaveNet</p>
          <p><strong>작성 일시:</strong> 2025년 11월</p>
          <p style="margin-top: 15px; font-size: 0.9em">
            본 리포트는 CSV 데이터 통합 분석을 통해 작성되었으며, 마케팅
            의사결정을 지원하기 위한 전략적 인사이트를 제공합니다.
          </p>
        </div>
      </div>
    </div>

    <!-- Plotly -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>

    <!-- Render Plotly graphs safely + responsive handling -->
    <script>
      (function () {
        // debounce helper
        function debounce(func, wait) {
          let timeout;
          return function () {
            const context = this,
              args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(context, args), wait);
          };
        }

        // safely parse JSON-ish attribute (data-graph)
        function safeParseGraph(dataAttr) {
          try {
            return JSON.parse(dataAttr);
          } catch (e) {
            // try to sanitize (replace single quotes with double quotes) as fallback
            try {
              const sanitized = dataAttr.replace(/(\r\n|\n|\r)/gm, "");
              return JSON.parse(sanitized);
            } catch (e2) {
              console.error("Failed to parse data-graph:", e2);
              return null;
            }
          }
        }

        // Ensure each .plotly-data has an id
        function ensureIds() {
          document.querySelectorAll(".plotly-data").forEach((el, idx) => {
            if (!el.id) el.id = "plotly-auto-" + idx;
          });
        }

        // Render all graphs
        function renderAllPlots() {
          ensureIds();
          const charts = document.querySelectorAll(".plotly-data");
          console.log("Found " + charts.length + " chart containers");

          charts.forEach((el, index) => {
            const id = el.id;
            const raw = el.getAttribute("data-graph") || el.dataset.graph;

            if (!raw) {
              console.error("No graph data for chart:", id);
              el.innerHTML =
                '<p class="text-red-500">No graph data provided.</p>';
              return;
            }

            const graph = safeParseGraph(raw);
            if (!graph) {
              console.error("Failed to parse graph data for:", id);
              el.innerHTML =
                '<p class="text-red-500">데이터 파싱 오류: 시각화 불가</p>';
              return;
            }

            // Ensure layout exists and is autosize-friendly
            graph.layout = graph.layout || {};
            graph.layout.autosize = true;
            graph.layout.margin = graph.layout.margin || {
              t: 50,
              b: 120,
              l: 60,
              r: 60,
            };
            graph.layout.font = graph.layout.font || {
              family: "Nanum Gothic, sans-serif",
            };

            // Ensure container has minimum height
            if (!el.style.minHeight) {
              el.style.minHeight = "400px";
            }

            const config = {
              responsive: true,
              displayModeBar: true,
              displaylogo: false,
              toImageButtonOptions: {
                format: "png",
                filename: "chart",
                height: 800,
                width: 1200,
              },
            };

            try {
              console.log("Rendering chart:", id);
              Plotly.newPlot(id, graph.data, graph.layout, config)
                .then(() => {
                  console.log("Chart rendered successfully:", id);
                  // after initial draw, ensure annotations/text fully visible by expanding margins if necessary
                  try {
                    Plotly.Plots.resize(document.getElementById(id));
                  } catch (e) {
                    console.warn("Resize error for", id, e);
                  }
                })
                .catch((err) => {
                  console.error("Plotly promise error for", id, err);
                  el.innerHTML =
                    '<p class="text-red-500">차트 렌더링 실패: ' +
                    err.message +
                    "</p>";
                });
            } catch (e) {
              console.error("Plotly render error for", id, ":", e);
              el.innerHTML =
                '<p class="text-red-500">데이터 시각화 중 오류가 발생했습니다: ' +
                e.message +
                "</p>";
            }
          });
        }

        // Wait for Plotly to load, then render
        function initCharts() {
          if (typeof Plotly === "undefined") {
            console.log("Waiting for Plotly to load...");
            setTimeout(initCharts, 100);
            return;
          }
          console.log("Plotly loaded, rendering charts...");
          renderAllPlots();
        }

        // Wait for both DOM and Plotly to be ready
        window.addEventListener("load", function () {
          initCharts();
        });

        // Fallback: if window.load already fired, try immediately
        if (document.readyState === "complete") {
          initCharts();
        }

        // Window resize: debounce Plotly resize for performance
        window.addEventListener(
          "resize",
          debounce(function () {
            document.querySelectorAll(".plotly-graph-div").forEach((g) => {
              try {
                Plotly.Plots.resize(g);
              } catch (e) {
                /* ignore */
              }
            });
          }, 150)
        );

        // Optional: re-render when user focuses back (handles some mobile reflow cases)
        window.addEventListener("focus", function () {
          try {
            document
              .querySelectorAll(".plotly-graph-div")
              .forEach((g) => Plotly.Plots.resize(g));
          } catch (e) {}
        });
      })();
    </script>
  </body>
</html>
